<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Skanowanie</title>
    <link rel="stylesheet" href="/static/css/main.css">
    <script src="/static/js/background-phrases.js"></script>
    <script defer src="/static/js/scan.js"></script>
</head>
<body data-session-id="{{ session_id }}">
<div id="background-text"></div>
<div class="container" style="text-align:center; max-width:700px;">

<h1>Skanowanie</h1>

<p style="margin: 20px 0; font-size: 16px; color: #1b1b1b;">
    Wybierz czy wchodzisz czy wychodzisz z fabryki:
</p>

<div style="margin: 20px 0; display: flex; justify-content: center; gap: 30px; flex-wrap: wrap;">
    <label style="display: flex; align-items: center; gap: 10px; cursor: pointer; font-size: 16px;">
        <input type="radio" name="entry_type" value="WEJŚCIE" checked style="width: 18px; height: 18px; cursor: pointer;"> 
        <span>Wejście do fabryki</span>
    </label>
    <label style="display: flex; align-items: center; gap: 10px; cursor: pointer; font-size: 16px;">
        <input type="radio" name="entry_type" value="WYJŚCIE" style="width: 18px; height: 18px; cursor: pointer;"> 
        <span>Wyjście z fabryki</span>
    </label>
</div>

<video id="video" width="500" height="400" autoplay style="border: 4px solid #81c784; border-radius: 12px; margin: 20px 0; object-fit: cover;"></video>
<canvas id="canvas" width="500" height="400" style="display:none"></canvas>

<p id="result" style="font-size: 16px; min-height: 24px; margin: 15px 0;"></p>

<div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap; margin-top: 30px;">
    <button id="scanBtn" style="padding: 16px 32px; font-size: 16px; background: #66bb6a; min-width: 200px;">Skanuj QR</button>
    <button id="faceBtn" disabled style="padding: 16px 32px; font-size: 16px; background: #81c784; min-width: 200px;">Zweryfikuj twarz</button>
</div>

<div style="margin-top: 20px;">
    <a href="/" style="text-decoration: none;">
        <button class="secondary" style="padding: 14px 28px; font-size: 15px;">Anuluj</button>
    </a>
</div>

<script>
const video = document.getElementById("video");
navigator.mediaDevices.getUserMedia({ video:true })
.then(s => video.srcObject = s);
</script>

</div>
</body>
</html>
